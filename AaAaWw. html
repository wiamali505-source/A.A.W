<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ©</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 20px;
            text-align: center;
        }

        .header h1 {
            color: #333;
            font-size: 2em;
            margin-bottom: 10px;
        }

        .nav {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 20px;
        }

        .nav-btn {
            padding: 12px 20px;
            background: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        .nav-btn.active {
            background: #667eea;
            color: white;
        }

        .content-section {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            display: none;
        }

        .content-section.active {
            display: block;
        }

        .section-title {
            color: #333;
            font-size: 1.5em;
            margin-bottom: 20px;
            text-align: center;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #333;
            font-weight: bold;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .table th, .table td {
            padding: 12px;
            text-align: right;
            border-bottom: 1px solid #ddd;
        }

        .table th {
            background: #f8f9fa;
            color: #333;
            font-weight: bold;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border-left: 4px solid #667eea;
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
            display: block;
        }

        .medicine-card {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
        }

        .expired {
            border-color: #dc3545;
            background: #ffe6e6;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
        }

        .modal-content {
            background: white;
            margin: 50px auto;
            padding: 20px;
            border-radius: 15px;
            max-width: 500px;
            position: relative;
        }

        .close {
            position: absolute;
            left: 15px;
            top: 15px;
            font-size: 1.5em;
            cursor: pointer;
        }

        @media (max-width: 768px) {
            .nav {
                flex-direction: column;
            }
            
            .nav-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
        <div class="header">
            <h1>ğŸ¥ Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ©</h1>
        </div>

        <!-- Ø§Ù„ØªÙ†Ù‚Ù„ -->
        <div class="nav">
            <button class="nav-btn active" onclick="showSection('dashboard')">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</button>
            <button class="nav-btn" onclick="showSection('inventory')">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</button>
            <button class="nav-btn" onclick="showSection('sales')">Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</button>
            <button class="nav-btn" onclick="showSection('customers')">Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</button>
            <button class="nav-btn" onclick="showSection('reports')">Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</button>
        </div>

        <!-- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… -->
        <div id="dashboard" class="content-section active">
            <h2 class="section-title">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-number" id="totalMedicines">0</span>
                    <span>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ø¯ÙˆÙŠØ©</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="totalSales">0</span>
                    <span>Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø¨ÙŠØ¹ Ø§Ù„ÙŠÙˆÙ…</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="totalCustomers">0</span>
                    <span>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="expiredMedicines">0</span>
                    <span>Ø£Ø¯ÙˆÙŠØ© Ù…Ù†ØªÙ‡ÙŠØ©</span>
                </div>
            </div>

            <div style="text-align: center; margin-top: 20px;">
                <button class="btn btn-primary" onclick="showSection('inventory')">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</button>
                <button class="btn btn-success" onclick="showSection('sales')">Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø¨ÙŠØ¹</button>
                <button class="btn btn-danger" onclick="showExpiredModal()">Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø¯ÙˆÙŠØ© Ø§Ù„Ù…Ù†ØªÙ‡ÙŠØ©</button>
            </div>
        </div>

        <!-- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ† -->
        <div id="inventory" class="content-section">
            <h2 class="section-title">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</h2>
            
            <button class="btn btn-primary" onclick="showAddMedicineModal()">â• Ø¥Ø¶Ø§ÙØ© Ø¯ÙˆØ§Ø¡ Ø¬Ø¯ÙŠØ¯</button>
            
            <div id="inventoryList" class="medicine-list" style="margin-top: 20px;">
                <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª -->
            </div>
        </div>

        <!-- Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª -->
        <div id="sales" class="content-section">
            <h2 class="section-title">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</h2>
            
            <div class="form-group">
                <label>Ø§Ø®ØªØ± Ø§Ù„Ø¯ÙˆØ§Ø¡:</label>
                <select id="medicineSelect">
                    <option value="">-- Ø§Ø®ØªØ± Ø¯ÙˆØ§Ø¡ --</option>
                </select>
            </div>
            
            <div class="form-group">
                <label>Ø§Ù„ÙƒÙ…ÙŠØ©:</label>
                <input type="number" id="saleQuantity" min="1" value="1">
            </div>
            
            <button class="btn btn-success" onclick="processSale()">âœ… ØªØ£ÙƒÙŠØ¯ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¨ÙŠØ¹</button>
            
            <table class="table">
                <thead>
                    <tr>
                        <th>Ø§Ù„Ø¯ÙˆØ§Ø¡</th>
                        <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
                        <th>Ø§Ù„Ø³Ø¹Ø±</th>
                        <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                    </tr>
                </thead>
                <tbody id="salesTable">
                    <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª -->
                </tbody>
            </table>
        </div>

        <!-- Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ -->
        <div id="customers" class="content-section">
            <h2 class="section-title">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h2>
            
            <button class="btn btn-primary" onclick="showAddCustomerModal()">â• Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯</button>
            
            <table class="table">
                <thead>
                    <tr>
                        <th>Ø§Ù„Ø§Ø³Ù…</th>
                        <th>Ø§Ù„Ù‡Ø§ØªÙ</th>
                        <th>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</th>
                        <th>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„</th>
                    </tr>
                </thead>
                <tbody id="customersTable">
                    <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª -->
                </tbody>
            </table>
        </div>

        <!-- Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± -->
        <div id="reports" class="content-section">
            <h2 class="section-title">Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± ÙˆØ§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-number" id="reportTotalSales">0</span>
                    <span>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="reportTotalRevenue">0</span>
                    <span>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª (Ø±ÙŠØ§Ù„)</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="reportTopMedicine">-</span>
                    <span>Ø§Ù„Ø¯ÙˆØ§Ø¡ Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø¨ÙŠØ¹Ø§Ù‹</span>
                </div>
            </div>
            
            <button class="btn btn-primary" onclick="generateReport()">ğŸ”„ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</button>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø¥Ø¶Ø§ÙØ© Ø¯ÙˆØ§Ø¡ -->
    <div id="addMedicineModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('addMedicineModal')">&times;</span>
            <h2 style="text-align: center; margin-bottom: 20px;">Ø¥Ø¶Ø§ÙØ© Ø¯ÙˆØ§Ø¡ Ø¬Ø¯ÙŠØ¯</h2>
            
            <div class="form-group">
                <label>Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ§Ø¡:</label>
                <input type="text" id="medicineName" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ§Ø¡">
            </div>
            
            <div class="form-group">
                <label>Ø§Ù„ÙƒÙ…ÙŠØ©:</label>
                <input type="number" id="medicineQuantity" min="1" value="1">
            </div>
            
            <div class="form-group">
                <label>Ø§Ù„Ø³Ø¹Ø± (Ø±ÙŠØ§Ù„):</label>
                <input type="number" id="medicinePrice" min="0" step="0.01" value="0">
            </div>
            
            <div class="form-group">
                <label>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡:</label>
                <input type="date" id="medicineExpiry">
            </div>
            
            <button class="btn btn-success" style="width: 100%;" onclick="addMedicine()">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¯ÙˆØ§Ø¡</button>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø£Ø¯ÙˆÙŠØ© Ø§Ù„Ù…Ù†ØªÙ‡ÙŠØ© -->
    <div id="expiredModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('expiredModal')">&times;</span>
            <h2 style="text-align: center; margin-bottom: 20px;">Ø§Ù„Ø£Ø¯ÙˆÙŠØ© Ø§Ù„Ù…Ù†ØªÙ‡ÙŠØ© Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©</h2>
            <div id="expiredMedicinesList">
                <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª -->
            </div>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„ -->
    <div id="addCustomerModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('addCustomerModal')">&times;</span>
            <h2 style="text-align: center; margin-bottom: 20px;">Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯</h2>
            
            <div class="form-group">
                <label>Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„:</label>
                <input type="text" id="customerName" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„">
            </div>
            
            <div class="form-group">
                <label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</label>
                <input type="tel" id="customerPhone" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">
            </div>
            
            <div class="form-group">
                <label>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:</label>
                <input type="email" id="customerEmail" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
            </div>
            
            <button class="btn btn-success" style="width: 100%;" onclick="addCustomer()">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…ÙŠÙ„</button>
        </div>
    </div>

    <script>
        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ®Ø²ÙŠÙ†
        let medicines = JSON.parse(localStorage.getItem('medicines')) || [];
        let sales = JSON.parse(localStorage.getItem('sales')) || [];
        let customers = JSON.parse(localStorage.getItem('customers')) || [];

        // Ø¯Ø§Ù„Ø© Ø¹Ø±Ø¶ Ø§Ù„Ù‚Ø³Ù…
        function showSection(sectionId) {
            // Ø¥Ø®ÙØ§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù†Ø´Ø· Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø²Ø±Ø§Ø±
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Ø¹Ø±Ø¶ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
            document.getElementById(sectionId).classList.add('active');
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ Ø¹Ø±Ø¶ Ø§Ù„Ù‚Ø³Ù…
            if(sectionId === 'dashboard') updateDashboard();
            if(sectionId === 'inventory') displayInventory();
            if(sectionId === 'sales') displaySales();
            if(sectionId === 'customers') displayCustomers();
            if(sectionId === 'reports') generateReport();
        }

        // ØªØ­Ø¯ÙŠØ« Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
        function updateDashboard() {
            document.getElementById('totalMedicines').textContent = medicines.length;
            document.getElementById('totalSales').textContent = sales.length;
            document.getElementById('totalCustomers').textContent = customers.length;
            
            const expiredCount = medicines.filter(med => new Date(med.expiryDate) < new Date()).length;
            document.getElementById('expiredMedicines').textContent = expiredCount;
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
        function displayInventory() {
            const inventoryList = document.getElementById('inventoryList');
            inventoryList.innerHTML = '';
            
            medicines.forEach((medicine, index) => {
                const isExpired = new Date(medicine.expiryDate) < new Date();
                const card = document.createElement('div');
                card.className = `medicine-card ${isExpired ? 'expired' : ''}`;
                card.innerHTML = `
                    <strong>${medicine.name}</strong><br>
                    Ø§Ù„ÙƒÙ…ÙŠØ©: ${medicine.quantity} | Ø§Ù„Ø³Ø¹Ø±: ${medicine.price} Ø±ÙŠØ§Ù„<br>
                    Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡: ${medicine.expiryDate} ${isExpired ? 'â›” Ù…Ù†ØªÙ‡ÙŠ' : ''}
                    <button class="btn btn-danger" onclick="deleteMedicine(${index})" style="float: left; padding: 5px 10px; font-size: 0.8em;">Ø­Ø°Ù</button>
                `;
                inventoryList.appendChild(card);
            });
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª
        function displaySales() {
            const medicineSelect = document.getElementById('medicineSelect');
            medicineSelect.innerHTML = '<option value="">-- Ø§Ø®ØªØ± Ø¯ÙˆØ§Ø¡ --</option>';
            
            medicines.forEach(medicine => {
                if(medicine.quantity > 0) {
                    const option = document.createElement('option');
                    option.value = medicine.name;
                    option.textContent = `${medicine.name} - ${medicine.price} Ø±ÙŠØ§Ù„ (${medicine.quantity} Ù…ØªÙˆÙØ±)`;
                    medicineSelect.appendChild(option);
                }
            });
            
            const salesTable = document.getElementById('salesTable');
            salesTable.innerHTML = '';
            
            sales.forEach(sale => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${sale.medicineName}</td>
                    <td>${sale.quantity}</td>
                    <td>${sale.totalPrice} Ø±ÙŠØ§Ù„</td>
                    <td>${sale.date}</td>
                `;
                salesTable.appendChild(row);
            });
        }

        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¨ÙŠØ¹
        function processSale() {
            const medicineName = document.getElementById('medicineSelect').value;
            const quantity = parseInt(document.getElementById('saleQuantity').value);
            
            if(!medicineName || !quantity) {
                alert('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¯ÙˆØ§Ø¡ ÙˆØ¥Ø¯Ø®Ø§Ù„ Ø§Ù„ÙƒÙ…ÙŠØ©');
                return;
            }
            
            const medicine = medicines.find(med => med.name === medicineName);
            
            if(!medicine) {
                alert('Ø§Ù„Ø¯ÙˆØ§Ø¡ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');
                return;
            }
            
            if(medicine.quantity < quantity) {
                alert('Ø§Ù„ÙƒÙ…ÙŠØ© ØºÙŠØ± Ù…ØªÙˆÙØ±Ø© ÙÙŠ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†');
                return;
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
            medicine.quantity -= quantity;
            
            // ØªØ³Ø¬ÙŠÙ„ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¨ÙŠØ¹
            const sale = {
                medicineName: medicine.name,
                quantity: quantity,
                totalPrice: quantity * medicine.price,
                date: new Date().toLocaleDateString('ar-SA')
            };
            
            sales.push(sale);
            
            // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            saveData();
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶
            displaySales();
            displayInventory();
            updateDashboard();
            
            alert(`ØªÙ…Øª Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¨ÙŠØ¹ Ø¨Ù†Ø¬Ø§Ø­! Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${sale.totalPrice} Ø±ÙŠØ§Ù„`);
            
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø­Ù‚ÙˆÙ„
            document.getElementById('medicineSelect').value = '';
            document.getElementById('saleQuantity').value = 1;
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
        function displayCustomers() {
            const customersTable = document.getElementById('customersTable');
            customersTable.innerHTML = '';
            
            customers.forEach(customer => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${customer.name}</td>
                    <td>${customer.phone}</td>
                    <td>${customer.email}</td>
                    <td>${customer.registrationDate}</td>
                `;
                customersTable.appendChild(row);
            });
        }

        // Ø¥Ø¶Ø§ÙØ© Ø¯ÙˆØ§Ø¡ Ø¬Ø¯ÙŠØ¯
        function showAddMedicineModal() {
            document.getElementById('addMedicineModal').style.display = 'block';
        }

        function addMedicine() {
            const name = document.getElementById('medicineName').value;
            const quantity = parseInt(document.getElementById('medicineQuantity').value);
            const price = parseFloat(document.getElementById('medicinePrice').value);
            const expiryDate = document.getElementById('medicineExpiry').value;
            
            if(!name || !quantity || !price || !expiryDate) {
                alert('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„');
                return;
            }
            
            const medicine = {
                name: name,
                quantity: quantity,
                price: price,
                expiryDate: expiryDate
            };
            
            medicines.push(medicine);
            saveData();
            displayInventory();
            updateDashboard();
            closeModal('addMedicineModal');
            
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø­Ù‚ÙˆÙ„
            document.getElementById('medicineName').value = '';
            document.getElementById('medicineQuantity').value = 1;
            document.getElementById('medicinePrice').value = 0;
            document.getElementById('medicineExpiry').value = '';
        }

        // Ø­Ø°Ù Ø¯ÙˆØ§Ø¡
        function deleteMedicine(index) {
            if(confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¯ÙˆØ§Ø¡ØŸ')) {
                medicines.splice(index, 1);
                saveData();
                displayInventory();
                updateDashboard();
            }
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø¯ÙˆÙŠØ© Ø§Ù„Ù…Ù†ØªÙ‡ÙŠØ©
        function showExpiredModal() {
            const expiredList = document.getElementById('expiredMedicinesList');
            expiredList.innerHTML = '';
            
            const expiredMedicines = medicines.filter(med => new Date(med.expiryDate) < new Date());
            
            if(expiredMedicines.length === 0) {
                expiredList.innerHTML = '<p style="text-align: center; color: green;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø¯ÙˆÙŠØ© Ù…Ù†ØªÙ‡ÙŠØ© Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©</p>';
            } else {
                expiredMedicines.forEach(med => {
                    const card = document.createElement('div');
                    card.className = 'medicine-card expired';
                    card.innerHTML = `
                        <strong>${med.name}</strong><br>
                        Ø§Ù„ÙƒÙ…ÙŠØ©: ${med.quantity} | Ø§Ù„Ø³Ø¹Ø±: ${med.price} Ø±ÙŠØ§Ù„<br>
                        ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡: ${med.expiryDate}
                    `;
                    expiredList.appendChild(card);
                });
            }
            
            document.getElementById('expiredModal').style.display = 'block';
        }

        // Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯
        function showAddCustomerModal() {
            document.getElementById('addCustomerModal').style.display = 'block';
        }

        function addCustomer() {
            const name = document.getElementById('customerName').value;
            const phone = document.getElementById('customerPhone').value;
            const email = document.getElementById('customerEmail').value;
            
            if(!name) {
                alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„');
                return;
            }
            
            const customer = {
                name: name,
                phone: phone,
                email: email,
                registrationDate: new Date().toLocaleDateString('ar-SA')
            };
            
            customers.push(customer);
            saveData();
            displayCustomers();
            updateDashboard();
            closeModal('addCustomerModal');
            
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø­Ù‚ÙˆÙ„
            document.getElementById('customerName').value = '';
            document.getElementById('customerPhone').value = '';
            document.getElementById('customerEmail').value = '';
        }

        // ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±
        function generateReport() {
            const totalSales = sales.reduce((sum, sale) => sum + sale.quantity, 0);
            const totalRevenue = sales.reduce((sum, sale) => sum + sale.totalPrice, 0);
            
            // Ø¥ÙŠØ¬Ø§Ø¯ Ø§Ù„Ø¯ÙˆØ§Ø¡ Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø¨ÙŠØ¹Ø§Ù‹
            const medicineSales = {};
            sales.forEach(sale => {
                medicineSales[sale.medicineName] = (medicineSales[sale.medicineName] || 0) + sale.quantity;
            });
            
            let topMedicine = '-';
            let maxSales = 0;
            for(const medicine in medicineSales) {
                if(medicineSales[medicine] > maxSales) {
                    maxSales = medicineSales[medicine];
                    topMedicine = medicine;
                }
            }
            
            document.getElementById('reportTotalSales').textContent = totalSales;
            document.getElementById('reportTotalRevenue').textContent = totalRevenue.toFixed(2);
            document.getElementById('reportTopMedicine').textContent = topMedicine;
        }

        // Ø¯Ø§Ù„Ø© Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function saveData() {
            localStorage.setItem('medicines', JSON.stringify(medicines));
            localStorage.setItem('sales', JSON.stringify(sales));
            localStorage.setItem('customers', JSON.stringify(customers));
        }

        // Ø¯Ø§Ù„Ø© Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†ÙˆØ§ÙØ°
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
        window.onload = function() {
            updateDashboard();
            displayInventory();
            
            // Ø¥Ø¶Ø§ÙØ© Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø«Ø§Ù„ Ø¥Ø°Ø§ Ù„Ù… ØªÙˆØ¬Ø¯
            if(medicines.length === 0) {
                medicines = [
                    { name: "Ø¨Ø§Ø±Ø§Ø³ÙŠØªØ§Ù…ÙˆÙ„", quantity: 100, price: 15.5, expiryDate: "2025-12-31" },
                    { name: "ÙÙŠØªØ§Ù…ÙŠÙ† C", quantity: 50, price: 25.0, expiryDate: "2025-10-15" },
                    { name: "Ø£Ù…ÙˆÙƒØ³ÙŠØ³ÙŠÙ„ÙŠÙ†", quantity: 30, price: 32.75, expiryDate: "2024-01-15" }
                ];
                saveData();
                displayInventory();
            }
        }

        // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
        window.onclick = function(event) {
            if (event.target.className === 'modal') {
                event.target.style.display = 'none';
            }
        }
    </script>
</body>
</html>
